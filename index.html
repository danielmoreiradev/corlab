<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CorLab — Laboratório de Cores Pro</title>
    
    <!-- Frameworks -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Estilos & Fontes -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .custom-scrollbar::-webkit-scrollbar { width: 5px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .pattern-dots-light { background-image: radial-gradient(#e2e8f0 1.5px, transparent 1.5px); background-size: 20px 20px; }
        
        /* Estilização Customizada para Sliders (Visibilidade Garantida) */
        input[type="range"] { 
            -webkit-appearance: none; 
            appearance: none;
            background: #cbd5e1 !important; /* Trilho cinza bem visível */
            height: 6px;
            border-radius: 999px;
            cursor: pointer; 
            width: 100%;
            margin: 10px 0;
        }
        input[type="range"]::-webkit-slider-thumb { 
            -webkit-appearance: none; 
            width: 18px; 
            height: 18px; 
            background: #6366f1; 
            border-radius: 50%; 
            border: 2px solid white; 
            box-shadow: 0 0 8px rgba(99, 102, 241, 0.4); 
        }
        
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        .anim-float { animation: float 3s ease-in-out infinite; }
        @keyframes glow { 0%, 100% { box-shadow: 0 0 10px rgba(99, 102, 241, 0.1); } 50% { box-shadow: 0 0 30px rgba(99, 102, 241, 0.2); } }
        .anim-glow { animation: glow 2s ease-in-out infinite; }
        @keyframes shake { 0%, 100% { transform: rotate(0); } 25% { transform: rotate(-2deg); } 75% { transform: rotate(2deg); } }
        .anim-shake { animation: shake 0.5s infinite; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-indigo-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        // --- Core Utils ---
        const hexToRgb = (hex) => {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return { r, g, b };
        };

        const rgbToHex = (r, g, b) => "#" + [r, g, b].map(x => x.toString(16).padStart(2, '0')).join('').toUpperCase();

        const getLuminance = (r, g, b) => {
            const a = [r, g, b].map(v => {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        };

        const getContrastRatio = (hex1, hex2) => {
            if (!hex1 || !hex2) return "1.00";
            const l1 = getLuminance(...Object.values(hexToRgb(hex1))) + 0.05;
            const l2 = getLuminance(...Object.values(hexToRgb(hex2))) + 0.05;
            return (Math.max(l1, l2) / Math.min(l1, l2)).toFixed(2);
        };

        const rgbToHsl = (r, g, b) => {
            r /= 255; g /= 255; b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            if (max === min) h = s = 0;
            else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                if (max === r) h = (g - b) / d + (g < b ? 6 : 0);
                else if (max === g) h = (b - r) / d + 2;
                else h = (r - g) / d + 4;
                h /= 6;
            }
            return { h: Math.round(h * 360), s: Math.round(s * 100), l: Math.round(l * 100) };
        };

        const hslToRgb = (h, s, l) => {
            s /= 100; l /= 100; h /= 360;
            let r, g, b;
            const hue2rgb = (p, q, t) => {
                if (t < 0) t += 1; if (t > 1) t -= 1;
                if (t < 1/6) return p + (q - p) * 6 * t;
                if (t < 1/2) return q;
                if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                return p;
            };
            const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
            const p = 2 * l - q;
            r = hue2rgb(p, q, h + 1/3); g = hue2rgb(p, q, h); b = hue2rgb(p, q, h - 1/3);
            return { r: Math.round(r * 255), g: Math.round(g * 255), b: Math.round(b * 255) };
        };

        // --- Constants ---
        const commonIcons = [
            "fas fa-arrow-right", "fas fa-rocket", "fas fa-check", "fas fa-star", 
            "fas fa-shopping-cart", "fas fa-envelope", "fas fa-phone", "fas fa-user",
            "fas fa-download", "fas fa-play", "fas fa-plus", "fas fa-search",
            "fas fa-paper-plane", "fas fa-heart", "fas fa-bell", "fas fa-globe"
        ];

        const colorPsychology = {
            vermelho: { desc: "Paixão, Urgência, Perigo, Energia.", baseH: 0, s: 80, l: 50 },
            azul: { desc: "Confiança, Segurança, Calma.", baseH: 220, s: 70, l: 50 },
            verde: { desc: "Crescimento, Saúde, Natureza.", baseH: 140, s: 60, l: 45 },
            amarelo: { desc: "Otimismo, Atenção, Felicidade.", baseH: 50, s: 90, l: 50 },
            roxo: { desc: "Luxo, Criatividade, Mistério.", baseH: 270, s: 60, l: 50 },
            laranja: { desc: "Amizade, Entusiasmo, Criatividade.", baseH: 30, s: 85, l: 55 },
            rosa: { desc: "Feminilidade, Romance, Doçura.", baseH: 330, s: 70, l: 60 },
            preto: { desc: "Sofisticação, Poder, Elegância.", baseH: 0, s: 0, l: 10 },
            branco: { desc: "Pureza, Limpeza, Modernidade.", baseH: 0, s: 0, l: 95 }
        };

        const App = () => {
            // --- Global State ---
            const [colors, setColors] = useState([
                { id: 1, hex: '#6366F1', opacity: 100 },
                { id: 2, hex: '#F43F5E', opacity: 100 }
            ]);
            const [activeTab, setActiveTab] = useState('palette');
            const [notif, setNotif] = useState(null);
            const [savedPalettes, setSavedPalettes] = useState(() => JSON.parse(localStorage.getItem('corlab_db') || '[]'));
            const [namingModal, setNamingModal] = useState({ open: false, type: '', name: '' });
            
            // Lab State
            const [accBg, setAccBg] = useState('#6366F1');
            const [accFg, setAccFg] = useState('#FFFFFF');
            
            // Gradient Lab
            const [gradStops, setGradStops] = useState([{ id: 1, hex: '#6366F1', opacity: 100 }, { id: 2, hex: '#A855F7', opacity: 100 }]);
            const [gradType, setGradType] = useState('linear');
            const [gradAngle, setGradAngle] = useState(135);
            const [gradTextCol, setGradTextCol] = useState('#FFFFFF');
            const [gradClass, setGradClass] = useState('bg-matrix-gradient');

            // Button Builder
            const [btn, setBtn] = useState({
                text: 'Garanta sua vaga', pt: 16, pb: 16, pl: 32, pr: 32, radius: 12, border: 0,
                bgType: 'gradient', bgSolid: '#6366F1', textColor: '#FFFFFF', animation: 'float',
                icon: 'fas fa-arrow-right', iconPos: 'right', customClass: 'btn-main-cta'
            });

            useEffect(() => { localStorage.setItem('corlab_db', JSON.stringify(savedPalettes)); }, [savedPalettes]);

            const notify = (msg) => { setNotif(msg); setTimeout(() => setNotif(null), 3000); };
            const copy = (txt) => { 
                const el = document.createElement('textarea');
                el.value = txt; document.body.appendChild(el); el.select();
                document.execCommand('copy'); document.body.removeChild(el);
                notify("Copiado!"); 
            };

            const currentGradient = useMemo(() => {
                const stops = gradStops.map(s => {
                    const rgb = hexToRgb(s.hex);
                    return `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${s.opacity/100})`;
                }).join(', ');
                return gradType === 'linear' ? `linear-gradient(${gradAngle}deg, ${stops})` : `radial-gradient(circle, ${stops})`;
            }, [gradStops, gradType, gradAngle]);

            const contrast = useMemo(() => getContrastRatio(accBg, accFg), [accBg, accFg]);

            // --- Handlers ---
            const handleImage = (e) => {
                const file = e.target.files[0];
                if(!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    const img = new Image();
                    img.onload = () => {
                        const c = document.createElement('canvas');
                        const ctx = c.getContext('2d');
                        c.width = img.width; c.height = img.height;
                        ctx.drawImage(img, 0, 0);
                        const pts = [[0.1, 0.1], [0.5, 0.5], [0.8, 0.8], [0.2, 0.8]];
                        const extracted = pts.map(p => ({
                            id: Math.random(),
                            hex: rgbToHex(...ctx.getImageData(img.width * p[0], img.height * p[1], 1, 1).data),
                            opacity: 100
                        }));
                        setColors(extracted);
                        notify("Cores extraídas!");
                    };
                    img.src = ev.target.result;
                };
                reader.readAsDataURL(file);
            };

            const confirmExport = () => {
                const { type, name } = namingModal;
                if(!name.trim()) return;
                const safeName = name.replace(/\s+/g, '-').toLowerCase();

                if(type === 'save') {
                    setSavedPalettes([{ id: Date.now(), name, colors: [...colors], date: new Date().toLocaleDateString() }, ...savedPalettes]);
                    notify("Projeto salvo!");
                } else if(type === 'txt') {
                    const blob = new Blob([colors.map(c => `${c.hex} (${c.opacity}%)`).join('\n')], { type: 'text/plain' });
                    const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = `${safeName}.txt`; a.click();
                    notify("Arquivo TXT baixado!");
                } else if(type === 'jpg') {
                    const canvas = document.createElement('canvas');
                    canvas.width = 1200; canvas.height = 600;
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = '#FFF'; ctx.fillRect(0,0,1200,600);
                    colors.forEach((c, i) => {
                        ctx.fillStyle = c.hex; ctx.fillRect(i * (1200/colors.length), 0, 1200/colors.length, 450);
                        ctx.fillStyle = '#000'; ctx.font = 'bold 20px Inter'; ctx.fillText(c.hex, i * (1200/colors.length) + 10, 500);
                    });
                    const a = document.createElement('a'); a.href = canvas.toDataURL('image/jpeg'); a.download = `${safeName}.jpg`; a.click();
                    notify("Imagem JPG baixada!");
                }
                setNamingModal({ open: false, type: '', name: '' });
            };

            const generateHarmony = (mode) => {
                const base = colors[0];
                const { h, s, l } = rgbToHsl(...Object.values(hexToRgb(base.hex)));
                let res = [base.hex];
                if(mode === 'comp') res.push(rgbToHex(...Object.values(hslToRgb((h+180)%360, s, l))));
                if(mode === 'tri') { res.push(rgbToHex(...Object.values(hslToRgb((h+120)%360, s, l)))); res.push(rgbToHex(...Object.values(hslToRgb((h+240)%360, s, l)))); }
                setColors(res.map(hex => ({ id: Math.random(), hex, opacity: 100 })));
                setAccBg(res[0]); setAccFg(res[1] || '#FFFFFF');
                notify("Harmonia aplicada!");
            };

            const getBtnCss = () => `.${btn.customClass} {
    background: ${btn.bgType === 'solid' ? btn.bgSolid : currentGradient};
    color: ${btn.textColor};
    padding: ${btn.pt}px ${btn.pr}px ${btn.pb}px ${btn.pl}px;
    border-radius: ${btn.radius}px;
    font-weight: 800;
    transition: 0.3s ease;
    display: inline-flex; align-items: center; gap: 10px;
    border: none; cursor: pointer;
    text-decoration: none;
    box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
    ${btn.animation !== 'none' ? `animation: ${btn.animation} 3s infinite;` : ''}
}
.${btn.customClass}:hover {
    filter: brightness(1.1);
    transform: translateY(-2px);
}`;

            return (
                <div className="min-h-screen pb-20">
                    {/* MODAL NOMES */}
                    {namingModal.open && (
                        <div className="fixed inset-0 z-[200] bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-4">
                            <div className="bg-white p-8 rounded-[2rem] w-full max-w-sm shadow-2xl border">
                                <h3 className="text-xl font-black uppercase mb-4 text-slate-900">Nome do Projeto</h3>
                                <p className="text-[10px] font-bold text-slate-400 uppercase mb-4 tracking-widest">Identifique seu arquivo para baixar</p>
                                <input autoFocus value={namingModal.name} onChange={e => setNamingModal({...namingModal, name: e.target.value})} className="w-full p-4 bg-slate-50 border rounded-xl mb-6 font-bold outline-none focus:border-indigo-500" placeholder="Ex: Landing Page Cliente"/>
                                <div className="flex gap-2">
                                    <button onClick={() => setNamingModal({open:false, type:'', name:''})} className="flex-1 py-3 text-xs font-black uppercase text-slate-400">Cancelar</button>
                                    <button onClick={confirmExport} className="flex-1 py-3 text-xs font-black uppercase bg-indigo-600 text-white rounded-xl shadow-lg">Confirmar</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* HEADER */}
                    <header className="sticky top-0 z-50 bg-white/90 backdrop-blur-xl border-b px-4 py-4 md:px-8 flex justify-between items-center">
                        <div className="flex items-center gap-3">
                            <div className="bg-indigo-600 p-2 rounded-xl text-white shadow-lg shadow-indigo-500/30"><i className="fas fa-palette"></i></div>
                            <h1 className="font-black uppercase tracking-widest text-sm text-slate-900">CorLab <span className="text-indigo-600 text-xs">PRO</span></h1>
                        </div>
                        <div className="flex gap-2">
                            <label className="cursor-pointer bg-white border border-slate-200 p-2.5 rounded-xl hover:bg-slate-50 shadow-sm transition-all" title="Extrair de Imagem"><i className="fas fa-image text-indigo-600"></i><input type="file" className="hidden" accept="image/*" onChange={handleImage}/></label>
                            
                            {/* Botões de Download JPG / TXT */}
                            <button onClick={() => setNamingModal({open:true, type:'txt', name:''})} className="hidden md:flex bg-white border border-slate-200 p-2.5 rounded-xl hover:bg-slate-50 shadow-sm transition-all text-indigo-600" title="Baixar .TXT"><i className="fas fa-file-lines"></i></button>
                            <button onClick={() => setNamingModal({open:true, type:'jpg', name:''})} className="hidden md:flex bg-white border border-slate-200 p-2.5 rounded-xl hover:bg-slate-50 shadow-sm transition-all text-indigo-600" title="Baixar .JPG"><i className="fas fa-file-image"></i></button>
                            
                            <button onClick={() => setNamingModal({open:true, type:'save', name:''})} className="bg-indigo-600 text-white px-5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition-all flex items-center gap-2">
                                <i className="fas fa-save"></i> <span className="hidden sm:inline">Salvar Paleta</span>
                            </button>
                        </div>
                    </header>

                    {notif && (
                        <div className="fixed bottom-8 left-1/2 -translate-x-1/2 z-[150] bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl flex items-center gap-3 animate-in fade-in slide-in-from-bottom-2"><i className="fas fa-check-circle text-indigo-400"></i><span className="text-[10px] font-black uppercase">{notif}</span></div>
                    )}

                    <main className="max-w-7xl mx-auto p-4 md:p-8 grid grid-cols-1 lg:grid-cols-12 gap-8">
                        {/* NAV */}
                        <nav className="lg:col-span-3 flex lg:flex-col gap-1 overflow-x-auto scrollbar-hide pb-2 lg:pb-0">
                            {['palette', 'gradient', 'buttons', 'insights', 'saved'].map((t, i) => (
                                <button key={t} onClick={() => setActiveTab(t)} className={`flex items-center gap-3 px-5 py-4 rounded-2xl text-[10px] font-black uppercase border transition-all whitespace-nowrap flex-1 lg:flex-none ${activeTab === t ? 'bg-white border-indigo-100 text-indigo-600 shadow-xl' : 'bg-transparent border-transparent text-slate-400'}`}>
                                    <i className={`fas ${['fa-swatchbook', 'fa-bolt', 'fa-mouse-pointer', 'fa-wand-magic-sparkles', 'fa-archive'][i]} w-4`}></i> {['Paleta & Hub', 'Gradient Lab', 'Button Studio', 'Insights Pro', 'Minhas Paletas'][i]}
                                </button>
                            ))}
                        </nav>

                        {/* CONTENT */}
                        <div className="lg:col-span-9 space-y-8 bg-white border border-slate-200 p-6 md:p-10 rounded-[2.5rem] shadow-sm min-h-[600px]">
                            
                            {/* 1. PALETA & HUB */}
                            {activeTab === 'palette' && (
                                <div className="space-y-12 animate-in fade-in">
                                    <div className="flex justify-between items-center">
                                        <h2 className="text-xl font-black uppercase tracking-tight text-slate-900">Painel Cromático</h2>
                                        <div className="flex gap-2">
                                            <button onClick={() => generateHarmony('comp')} className="px-3 py-2 border border-slate-200 rounded-lg text-[9px] font-black uppercase hover:bg-slate-50 transition-all">Complementar</button>
                                            <button onClick={() => generateHarmony('tri')} className="px-3 py-2 border border-slate-200 rounded-lg text-[9px] font-black uppercase hover:bg-slate-50 transition-all">Tríade</button>
                                            <button onClick={() => setColors([...colors, {id:Date.now(), hex:'#94a3b8', opacity:100}])} className="p-2.5 bg-indigo-600 text-white rounded-xl shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all"><i className="fas fa-plus"></i></button>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                                        {colors.map(c => (
                                            <div key={c.id} className="bg-slate-50 p-4 rounded-3xl border border-slate-200 group hover:border-indigo-400 transition-all">
                                                <div className="h-28 w-full rounded-2xl mb-4 shadow-sm cursor-pointer relative overflow-hidden" style={{ backgroundColor: c.hex, opacity: c.opacity/100 }} onClick={() => copy(c.hex)}>
                                                    <div className="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 bg-black/10 transition-opacity text-white"><i className="fas fa-copy"></i></div>
                                                </div>
                                                <input type="color" value={c.hex} onChange={e => setColors(colors.map(col => col.id === c.id ? {...col, hex: e.target.value} : col))} className="w-full h-10 bg-transparent border-none cursor-pointer mb-2"/>
                                                
                                                {/* Controle de Opacidade Reintegrado */}
                                                <div className="space-y-2 mb-4"><div className="flex justify-between text-[8px] font-black text-slate-400 uppercase"><span>Opacidade</span><span>{c.opacity}%</span></div><input type="range" min="0" max="100" value={c.opacity} onChange={e => setColors(colors.map(col => col.id === c.id ? {...col, opacity: parseInt(e.target.value)} : col))}/></div>
                                                
                                                <div className="flex justify-between items-center mb-4">
                                                    <span className="text-[11px] font-mono font-black uppercase text-slate-600">{c.hex}</span>
                                                    <button onClick={() => setColors(colors.filter(col => col.id !== c.id))} className="text-slate-300 hover:text-red-500 transition-colors"><i className="fas fa-trash-can"></i></button>
                                                </div>
                                                <div className="flex gap-1.5"><button onClick={() => setAccBg(c.hex)} className="flex-1 py-1.5 bg-white border border-slate-200 text-[8px] font-black uppercase rounded-md hover:bg-slate-100 transition-all">P. Fundo</button><button onClick={() => setAccFg(c.hex)} className="flex-1 py-1.5 bg-white border border-slate-200 text-[8px] font-black uppercase rounded-md hover:bg-slate-100 transition-all">Texto</button></div>
                                            </div>
                                        ))}
                                    </div>
                                    <section className="bg-slate-50 p-8 rounded-[2rem] border border-slate-200 shadow-inner">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
                                            <div className="space-y-6">
                                                <h3 className="text-xs font-black uppercase tracking-widest text-slate-500"><i className="fas fa-shield-halved text-emerald-500 mr-2"></i> WCAG Contrast Lab</h3>
                                                <div className="flex items-end gap-4"><div className="text-5xl font-black text-slate-900">{contrast}</div><div className="space-y-1"><div className={`text-[10px] font-black px-2 py-0.5 rounded flex items-center gap-1.5 ${contrast >= 4.5 ? 'bg-emerald-500 text-white' : 'bg-slate-200 text-slate-400'}`}>Normal (AA)</div><div className={`text-[10px] font-black px-2 py-0.5 rounded flex items-center gap-1.5 ${contrast >= 7 ? 'bg-emerald-500 text-white' : 'bg-slate-200 text-slate-400'}`}>Rigoroso (AAA)</div></div></div>
                                                <button onClick={() => { const b = accBg; setAccBg(accFg); setAccFg(b); }} className="w-full py-3 bg-white border border-slate-200 rounded-xl font-black text-[10px] uppercase shadow-sm hover:bg-slate-50 transition-all">Inverter Camadas</button>
                                                <div className="pt-4 border-t border-slate-200"><span className="text-[8px] font-black uppercase text-slate-400 block mb-3">Check Global da Paleta</span><div className="flex flex-wrap gap-2">{colors.map(c => (<div key={c.id} onClick={() => setAccFg(c.hex)} className={`cursor-pointer px-2 py-1.5 rounded-lg text-[9px] font-black border transition-all flex items-center gap-1.5 ${getContrastRatio(accBg, c.hex) >= 4.5 ? 'bg-emerald-50 border-emerald-100 text-emerald-700' : 'bg-rose-50 border-rose-100 text-rose-700'}`}><div className="w-1.5 h-1.5 rounded-full" style={{backgroundColor: c.hex}}></div>{getContrastRatio(accBg, c.hex)}</div>))}</div></div>
                                            </div>
                                            <div className="h-52 rounded-[2.5rem] flex flex-col items-center justify-center p-8 text-center shadow-lg border border-black/5" style={{ backgroundColor: accBg }}>
                                                <span className="text-2xl font-black mb-2" style={{ color: accFg }}>Legibilidade Real</span>
                                                <p className="text-xs font-bold opacity-80" style={{ color: accFg }}>O design profissional é sempre acessível.</p>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            )}

                            {/* 2. GRADIENT LAB */}
                            {activeTab === 'gradient' && (
                                <div className="space-y-10 animate-in fade-in">
                                    <div className="w-full h-64 rounded-[2.5rem] border-8 border-white shadow-xl flex items-center justify-center p-8" style={{ background: currentGradient }}>
                                        <div className="text-center"><h3 className="text-4xl font-black tracking-tighter mb-2" style={{ color: gradTextCol }}>Preview Título</h3><p className="text-sm font-bold opacity-80" style={{ color: gradTextCol }}>Visualização sobre o degradê.</p></div>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-10">
                                        <div className="space-y-6">
                                            <div className="flex justify-between items-center"><h4 className="text-[10px] font-black uppercase text-slate-400 flex items-center gap-2"><i className="fas fa-layer-group"></i> Color Stops</h4><button onClick={() => setGradStops([...gradStops, {id:Date.now(), hex:'#F43F5E', opacity:100}])} className="p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 transition-all"><i className="fas fa-plus"></i></button></div>
                                            <div className="space-y-4 max-h-[350px] overflow-y-auto pr-3 custom-scrollbar">
                                                {gradStops.map(s => (
                                                <div key={s.id} className="bg-slate-50 p-4 rounded-2xl border border-slate-200 flex items-center gap-4 group">
                                                    <input type="color" value={s.hex} onChange={e => setGradStops(gradStops.map(st => st.id === s.id ? {...st, hex: e.target.value} : st))} className="w-10 h-10 bg-transparent border-none cursor-pointer"/>
                                                    <div className="flex-1 space-y-1"><label className="text-[8px] font-black uppercase text-slate-400 flex justify-between">Opacidade <span>{s.opacity}%</span></label><input type="range" min="0" max="100" value={s.opacity} onChange={e => setGradStops(gradStops.map(st => st.id === s.id ? {...st, opacity: parseInt(e.target.value)} : st))}/></div>
                                                    <button onClick={() => setGradStops(gradStops.filter(st => st.id !== s.id))} className="text-slate-300 hover:text-red-500 transition-all"><i className="fas fa-trash"></i></button>
                                                </div>
                                            ))}</div>
                                        </div>
                                        <div className="space-y-6">
                                            <div className="bg-slate-900 p-8 rounded-[2.5rem] border border-slate-800 text-indigo-300 font-mono text-[10px] shadow-inner relative group">
                                                <div className="flex justify-between mb-6 border-b border-white/10 pb-2"><span className="text-white font-black uppercase tracking-widest flex items-center gap-2"><i className="fas fa-code"></i> CSS Code</span><button onClick={() => copy(`background: ${currentGradient};`)} className="hover:text-white transition-all"><i className="fas fa-copy"></i></button></div>
                                                <code className="break-all leading-relaxed">{`background: ${currentGradient};`}</code>
                                            </div>
                                            
                                            <div className="p-4 bg-slate-50 border border-slate-200 rounded-2xl flex justify-between items-center"><span className="text-[10px] font-black uppercase text-slate-400">Cor do Texto Preview</span><input type="color" value={gradTextCol} onChange={e => setGradTextCol(e.target.value)} className="w-8 h-8 rounded-lg cursor-pointer bg-transparent border-none"/></div>
                                            
                                            <div className="grid grid-cols-2 gap-3"><button onClick={() => setGradType('linear')} className={`py-3 rounded-2xl text-[10px] font-black uppercase border transition-all ${gradType === 'linear' ? 'bg-indigo-600 border-indigo-600 text-white shadow-md' : 'bg-white border-slate-200 text-slate-400'}`}>Linear</button><button onClick={() => setGradType('radial')} className={`py-3 rounded-2xl text-[10px] font-black uppercase border transition-all ${gradType === 'radial' ? 'bg-indigo-600 border-indigo-600 text-white shadow-md' : 'bg-white border-slate-200 text-slate-400'}`}>Radial</button></div>
                                            {gradType === 'linear' && (
                                                <div className="p-4 bg-slate-50 border border-slate-200 rounded-2xl space-y-3"><div className="flex justify-between text-[9px] font-black uppercase text-slate-400">Ângulo do Degradê <span>{gradAngle}°</span></div><input type="range" min="0" max="360" value={gradAngle} onChange={e => setGradAngle(e.target.value)}/></div>
                                            )}
                                            
                                            {/* Classe CSS do Gradiente Reintegrada */}
                                            <div className="space-y-2"><label className="text-[9px] font-black text-slate-400 uppercase px-1">Classe CSS do Gradiente</label><input type="text" value={gradClass} onChange={e => setGradClass(e.target.value)} className="w-full p-4 bg-white border border-slate-200 rounded-2xl text-xs font-mono outline-none focus:border-indigo-400 transition-all" placeholder="Nome da classe..."/></div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* 3. BUTTON STUDIO */}
                            {activeTab === 'buttons' && (
                                <div className="space-y-10 animate-in fade-in">
                                    <div className="w-full h-56 bg-white rounded-[3rem] border border-slate-200 flex items-center justify-center pattern-dots-light relative overflow-hidden shadow-inner group">
                                        <a href="#" className={`${btn.animation !== 'none' ? `anim-${btn.animation}` : ''}`}
                                            style={{
                                                padding: `${btn.pt}px ${btn.pr}px ${btn.pb}px ${btn.pl}px`, borderRadius: `${btn.radius}px`,
                                                background: btn.bgType === 'solid' ? btn.bgSolid : currentGradient, color: btn.textColor,
                                                border: `${btn.border}px solid ${btn.borderColor}`, fontWeight: '800', fontSize: '15px', textDecoration: 'none',
                                                display: 'inline-flex', alignItems: 'center', gap: '12px', transition: '0.3s', boxShadow: '0 10px 20px -5px rgba(0,0,0,0.1)'
                                            }}>
                                            {btn.iconPos === 'left' && <i className={btn.icon}></i>}{btn.text}{btn.iconPos === 'right' && <i className={btn.icon}></i>}
                                        </a>
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        <div className="bg-slate-50 p-6 rounded-[2rem] border border-slate-200 space-y-5 shadow-sm">
                                            <h5 className="text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center gap-2"><i className="fas fa-font"></i> Conteúdo</h5>
                                            <input type="text" value={btn.text} onChange={e => setBtn({...btn, text:e.target.value})} className="w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-xs font-bold outline-none focus:border-indigo-400" placeholder="Texto do botão"/>
                                            <div className="space-y-2">
                                                <span className="text-[9px] font-black text-slate-400 uppercase">Ícones Populares</span>
                                                <div className="grid grid-cols-4 gap-2 max-h-32 overflow-y-auto p-1 custom-scrollbar bg-white border rounded-xl">
                                                    {commonIcons.map(icon => (<button key={icon} onClick={() => setBtn({...btn, icon})} className={`p-2.5 rounded-lg border transition-all ${btn.icon === icon ? 'bg-indigo-600 border-indigo-600 text-white' : 'bg-white border-slate-100 text-slate-400 hover:border-indigo-400'}`}><i className={icon}></i></button>))}
                                                </div>
                                            </div>
                                            <div className="flex gap-1"><button onClick={() => setBtn({...btn, iconPos:'left'})} className={`flex-1 py-2 rounded-lg text-[9px] font-black uppercase border transition-all ${btn.iconPos === 'left' ? 'bg-indigo-600 text-white border-indigo-600 shadow-md' : 'bg-white text-slate-400 border-slate-200'}`}>Esq</button><button onClick={() => setBtn({...btn, iconPos:'right'})} className={`flex-1 py-2 rounded-lg text-[9px] font-black uppercase border transition-all ${btn.iconPos === 'right' ? 'bg-indigo-600 text-white border-indigo-600 shadow-md' : 'bg-white text-slate-400 border-slate-200'}`}>Dir</button></div>
                                        </div>
                                        <div className="bg-slate-50 p-6 rounded-[2rem] border border-slate-200 space-y-5 shadow-sm">
                                            <h5 className="text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center gap-2"><i className="fas fa-arrows-up-down-left-right"></i> Layout Studio</h5>
                                            <div className="grid grid-cols-2 gap-x-4 gap-y-3">
                                                {['pt', 'pb', 'pl', 'pr'].map(p => (<div key={p} className="space-y-1"><label className="text-[8px] font-black text-slate-500 uppercase">{p} {btn[p]}px</label><input type="range" min="0" max="80" value={btn[p]} onChange={e => setBtn({...btn, [p]:parseInt(e.target.value)})}/></div>))}
                                            </div>
                                            <div className="grid grid-cols-2 gap-3 pt-2">
                                                <div className="space-y-1"><label className="text-[8px] font-black text-slate-500 uppercase">Radius {btn.radius}px</label><input type="range" min="0" max="50" value={btn.radius} onChange={e => setBtn({...btn, radius:parseInt(e.target.value)})}/></div>
                                                <div className="space-y-1"><label className="text-[8px] font-black text-slate-500 uppercase">Borda {btn.border}px</label><input type="range" min="0" max="10" value={btn.border} onChange={e => setBtn({...btn, border:parseInt(e.target.value)})}/></div>
                                            </div>
                                        </div>
                                        <div className="bg-slate-50 p-6 rounded-[2rem] border border-slate-200 space-y-5 shadow-sm">
                                            <h5 className="text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center gap-2"><i className="fas fa-bolt"></i> Visual Pro</h5>
                                            <select value={btn.animation} onChange={e => setBtn({...btn, animation:e.target.value})} className="w-full h-11 px-4 rounded-xl border border-slate-200 text-[10px] font-black uppercase outline-none bg-white">
                                                <option value="none">Sem Animação</option><option value="float">Flutuar</option><option value="glow">Glow Pulse</option><option value="shake">Agitar</option>
                                            </select>
                                            <div className="grid grid-cols-2 gap-3">
                                                <div className="space-y-1"><span className="text-[8px] font-black text-slate-400 uppercase">Sólido</span><input type="color" value={btn.bgSolid} onChange={e => setBtn({...btn, bgSolid:e.target.value, bgType:'solid'})} className="w-full h-10 border rounded-xl bg-transparent"/></div>
                                                <div className="space-y-1"><span className="text-[8px] font-black text-slate-400 uppercase">Texto</span><input type="color" value={btn.textColor} onChange={e => setBtn({...btn, textColor:e.target.value})} className="w-full h-10 border rounded-xl bg-transparent"/></div>
                                            </div>
                                            <button onClick={() => setBtn({...btn, bgType:'gradient'})} className={`w-full py-3 rounded-xl text-[9px] font-black uppercase border transition-all ${btn.bgType === 'gradient' ? 'bg-indigo-600 text-white border-indigo-600 shadow-md' : 'bg-white text-slate-400 border-slate-200'}`}>Usar Gradiente Lab</button>
                                        </div>
                                    </div>
                                    
                                    {/* Campo de Classe do Botão Reintegrado */}
                                    <div className="p-6 bg-slate-50 rounded-[2rem] border border-slate-200 flex flex-col sm:flex-row gap-4 items-center justify-between shadow-sm">
                                        <div className="flex-1 w-full"><label className="text-[9px] font-black text-slate-400 uppercase px-1">Classe CSS Customizada</label><input type="text" value={btn.customClass} onChange={e => setBtn({...btn, customClass: e.target.value.replace(/\s+/g, '-')})} className="w-full mt-1 p-4 bg-white border border-slate-200 rounded-2xl text-xs font-mono outline-none focus:border-indigo-400 transition-all"/></div>
                                        <div className="h-10 w-[1px] bg-slate-200 mx-4 hidden sm:block"></div>
                                        <div className="text-right"><p className="text-[8px] font-black text-slate-400 uppercase">Status</p><p className="text-[10px] font-bold text-emerald-500 uppercase tracking-widest">Código pronto</p></div>
                                    </div>

                                    <div className="bg-white p-8 rounded-[2.5rem] border border-slate-200 space-y-6 shadow-xl relative group overflow-hidden">
                                        <div className="flex justify-between items-center relative z-10"><span className="text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center gap-2"><i className="fas fa-code"></i> Bundle de Componente</span><button onClick={() => copy(getBtnCss())} className="text-indigo-600 font-black text-[10px] uppercase hover:text-indigo-800 transition-all">Copiar CSS</button></div>
                                        <pre className="p-6 bg-slate-900 rounded-2xl text-[10px] font-mono text-indigo-300 overflow-x-auto h-48 custom-scrollbar leading-relaxed relative z-10 border border-white/5">{getBtnCss()}</pre>
                                    </div>
                                </div>
                            )}

                            {activeTab === 'insights' && (
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6 animate-in fade-in duration-500">
                                    {Object.entries(colorPsychology).map(([key, val]) => (
                                        <div key={key} className="bg-slate-50 p-8 rounded-[2.5rem] border border-slate-200 flex items-start gap-6 hover:border-indigo-600 hover:bg-white transition-all cursor-pointer group shadow-sm" onClick={() => { const rgb = hslToRgb(val.baseH, val.s, val.l); const hex = rgbToHex(rgb.r, rgb.g, rgb.b); setAccBg(hex); setAccFg(key === 'branco' ? '#0F172A' : '#FFFFFF'); notify("Aplicado!"); }}>
                                            <div className="w-14 h-14 rounded-[1.25rem] shadow-lg shrink-0 border-2 border-white transition-transform group-hover:scale-110" style={{ backgroundColor: `hsl(${val.baseH}, ${val.s}%, ${val.l}%)` }}></div>
                                            <div><h4 className="font-black uppercase text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors tracking-tight">{key}</h4><p className="text-[11px] text-slate-500 italic leading-relaxed">"{val.desc}"</p></div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {activeTab === 'saved' && (
                                <div className="space-y-8 animate-in fade-in duration-500">
                                    <h2 className="text-xl font-black uppercase mb-6 flex justify-between items-center tracking-tight text-slate-900">Meus Projetos <span className="text-[10px] bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full">{savedPalettes.length}</span></h2>
                                    {savedPalettes.length === 0 ? (
                                        <div className="h-64 flex flex-col items-center justify-center border-2 border-dashed border-slate-200 rounded-[2.5rem] text-slate-300 shadow-inner bg-slate-50/50"><i className="fas fa-box-archive text-4xl mb-4 opacity-20"></i><p className="font-bold uppercase tracking-widest text-[10px]">Cofre vazio</p></div>
                                    ) : (
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            {savedPalettes.map(p => (
                                                <div key={p.id} className="bg-slate-50 border border-slate-200 p-6 rounded-[2rem] hover:border-indigo-600 transition-all group relative shadow-sm">
                                                    <div className="flex justify-between items-start mb-6"><div><h4 className="font-black text-lg uppercase leading-none mb-1 text-slate-900 tracking-tight">{p.name}</h4><p className="text-[9px] font-black text-slate-400 uppercase tracking-widest">{p.date}</p></div><button onClick={() => setSavedPalettes(savedPalettes.filter(item => item.id !== p.id))} className="p-2 text-slate-300 hover:text-red-500 transition-all"><i className="fas fa-trash-can"></i></button></div>
                                                    <div className="flex h-10 rounded-xl overflow-hidden mb-6 shadow-inner border border-black/5">{p.colors.map((c, i) => (<div key={i} className="flex-1" style={{ backgroundColor: c.hex }}></div>))}</div>
                                                    <div className="flex gap-2"><button onClick={() => { setColors(p.colors); setActiveTab('palette'); notify("Carregado!"); window.scrollTo({ top: 0, behavior: 'smooth' }); }} className="flex-1 py-3 bg-white border border-slate-200 rounded-xl text-[9px] font-black uppercase hover:bg-indigo-600 hover:text-white hover:border-indigo-600 transition-all shadow-sm">Ativar</button><button onClick={() => setNamingModal({open:true, type:'txt', name: p.name})} title="Baixar TXT" className="p-3 bg-white border border-slate-200 rounded-xl text-slate-400 hover:bg-slate-100 transition-all shadow-sm"><i className="fas fa-download"></i></button></div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            )}
                        </div>
                    </main>

                    <footer className="fixed bottom-0 z-50 w-full bg-white/80 backdrop-blur-md border-t border-slate-200 px-8 py-4 hidden md:flex justify-between items-center text-slate-400 shadow-2xl">
                        <div className="flex items-center gap-6 text-[9px] font-black uppercase tracking-[0.3em]"><span className="flex items-center gap-2"><div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse shadow-lg shadow-emerald-200"></div> Engine v4.1 Estável</span><span className="text-slate-200">|</span><span>Web Design Performance Engine</span></div>
                        <div className="flex gap-6 items-center opacity-40 hover:opacity-100 transition-opacity"><i className="fas fa-desktop cursor-pointer hover:text-indigo-600"></i><i className="fas fa-mobile-screen cursor-pointer hover:text-indigo-600"></i><div className="h-4 w-[1px] bg-slate-200 mx-2"></div><p className="text-[8px] font-black uppercase tracking-widest">ADS Workflow</p></div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
